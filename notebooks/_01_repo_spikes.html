
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Rate Spikes in the Market for Repurchase Agreements &#8212; Full Stack Quantitative Finance</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f23691d7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=8dbc1659"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/_01_repo_spikes';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>   
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Full Stack Quantitative Finance - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Full Stack Quantitative Finance - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Full Stack Quantitative Finance
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../README.html">Course Syllabus: FINM 32900, Winter 2026</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures üìñ</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w1.html">Week 1: GitHub, GitHub Classroom, and Virtual Environments</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week1/what_is_this_course_about.html">What is Full Stack Quantitative Finance? Why This Course?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/reproducible_analytical_pipelines.html">What are Reproducible Analytical Pipelines?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/case_study_reproducibility_in_finance.html">Case Study: Is There A Reproducibility Crisis In Finance?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/virtual_environments.html">Virtual Environments</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w2.html">Week 2: Env Files and Secrets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week2/WRDS_intro_and_web_queries.html">Introduction to WRDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="_01_wrds_python_package.html">Example: Connecting to the WRDS Platform With Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/env_files.html">Env Files, Secrets, and the Separations of Settings from Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/github_pages_preview.html">GitHub Pages and Tearsheets</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../subject_to_change_after_this_week.html">‚ÄìWARNING! Textbook under revision. Schedule subject to change after HERE‚Äì</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w3.html">Week 3: Task Runners, Automating Queries, and the Basics of SQL</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week3/what_is_a_task_runner.html">What is a build system or task runner?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/doit_examples.html">PyDoit Examples Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/project_structure.html">Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="_05_basics_of_SQL.html">Basics of SQL</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w4.html">Week 4: Generating Reports, featuring Jupyter Notebooks and LaTeX</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week4/reports_with_jupyter_notebooks.html">Reports with Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/intro_to_LaTeX.html">Introduction to LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/latex_essentials.html">LaTeX Essentials</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w5.html">Week 5: Unit Tests and Documentation with Sphinx</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week5/sphinx.html">Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/unit_tests.html">Unit Tests</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w6.html">Week 6: Python Package Development and Social Coding with GitHub</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week6/GitHub_pull_requests.html">GitHub Issues and Pull Requests: Enhancing Collaborative Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/python_packaging_with_hatch.html">Writing and Publishing Your Own Python Packages</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w7.html">Week 7: Bloomberg and LSEG Datastream</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week7/bloomberg_terminal.html">The Bloomberg Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/LSEG_datastream.html">LSEG Datastream</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w8.html">Week 8: Web Authentication and Authorization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_01_corporate_hedging.html">Case Study: Hedging Oil Price Exposure As An E&amp;P</a></li>
<li class="toctree-l2"><a class="reference internal" href="_02_spx_hedging.html">Case Study: Hedging A Long-Only SPX Portfolio With Costless Collars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/web_authentication.html">Web Authentication and Authorization</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview_w9.html">Week 9: GitHub Actions and Publishing a Live Dashboard</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week9/github_actions_interactive_dashboard.html">Creating a Live Dashboard Example with GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/intro_to_LaTeX.html">Introduction to LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/latex_essentials.html">LaTeX Essentials</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Homework üìù</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../HW0.html">Homework 0</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../HW1.html">Homework 1</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_02_CRSP_market_index.html">HW Guide Part A: CRSP Market Returns Indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="_03_SP500_constituents_and_index.html">HW Guide Part B: Reconstructing the S&amp;P 500 Index</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../HW2.html">Homework 2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_04_Fama_French_1993_ipynb.html">HW Guide Part A: Replicate Fama-French 1993</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../final_project.html">Final Project</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jmbejara/blank_project" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jmbejara/blank_project/issues/new?title=Issue%20on%20page%20%2Fnotebooks/_01_repo_spikes.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/_01_repo_spikes.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Rate Spikes in the Market for Repurchase Agreements</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Rate Spikes in the Market for Repurchase Agreements</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-the-role-of-the-repo-market-and-why-is-it-important">What is the role of the repo market and why is it important?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-repurchase-agreement">What is a repurchase agreement?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at-time-t">At Time <span class="math notranslate nohighlight">\(t\)</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at-time-t-t-n-text-days">At Time <span class="math notranslate nohighlight">\(T = t + n \text{ days}\)</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#money-market-dislocations-and-the-repo-rate-spikes-of-2018-2019">Money market dislocations and the repo rate spikes of 2018-2019</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relationship-to-quantitative-investors">Relationship to Quantitative Investors</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-repo-markets-are-important-to-understanding-the-risks-involved-in-this-trade">Understanding Repo Markets Are Important to Understanding the Risks involved in this Trade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#repo-rates-and-fed-funds-rates">Repo Rates and Fed Funds Rates</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-this-plot">Understanding this plot</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reserve-levels-vs-spikes">Reserve Levels vs Spikes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fed-repo-and-reverse-repo-facility-takeup">Fed Repo and Reverse Repo Facility Takeup</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#how-should-we-define-a-repo-spike">How should we define a repo spike?</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fed-funds-target-range">Fed Fund‚Äôs Target Range</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-stats-about-various-repo-rates">Summary Stats about Various Repo Rates</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section class="tex2jax_ignore mathjax_ignore" id="rate-spikes-in-the-market-for-repurchase-agreements">
<h1>Rate Spikes in the Market for Repurchase Agreements<a class="headerlink" href="#rate-spikes-in-the-market-for-repurchase-agreements" title="Link to this heading">#</a></h1>
<section id="what-is-the-role-of-the-repo-market-and-why-is-it-important">
<h2>What is the role of the repo market and why is it important?<a class="headerlink" href="#what-is-the-role-of-the-repo-market-and-why-is-it-important" title="Link to this heading">#</a></h2>
<p>The market for repurchase agreements, commonly known as the repo market,
serves as a cornerstone for short-term financing among financial institutions.
This market enables entities, including banks, dealers, money market funds,
insurance companies, pension funds, and other entities, to obtain liquidity on
an overnight basis or for other short tenures, thereby ensuring operational
continuity.  Its collateralized nature minimizes credit risk, making it a
preferred avenue for secure, short-term lending and borrowing.</p>
<p>Moreover, the repo market is critical in implementing monetary policy, especially considering the diminished role of the unsecured interbank market compared to the secured market following the 2007-2008 financial crisis. Its central role in providing liquidity and facilitating monetary policy execution underscores the necessity of the repo market‚Äôs efficient functioning for financial stability and the broader economy. Disruptions within this market can have widespread impacts, affecting various financial participants, including banks, money market funds, hedge funds, and corporations.</p>
</section>
<section id="what-is-a-repurchase-agreement">
<h2>What is a repurchase agreement?<a class="headerlink" href="#what-is-a-repurchase-agreement" title="Link to this heading">#</a></h2>
<p>A repurchase agreement, often referred to as a repo, is a form of short-term borrowing mainly used in the money markets.
A repurchase agreement can be visualized as follows. The following Figure is from <em>Fixed Income Securities</em>, by Veronsi.
This demonstrates a trader purchasing a bond in the market and financing the purchase via a repurchase agreement.</p>
<p><img alt="" src="../_images/hw01_repo_diagram_veronesi.png" /></p>
<section id="at-time-t">
<h3>At Time <span class="math notranslate nohighlight">\(t\)</span><a class="headerlink" href="#at-time-t" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><strong>Choosing Bond to Finance</strong>:</p>
<ul class="simple">
<li><p>The <strong>TRADER</strong> initiates the transaction by purchasing a bond from the <strong>MARKET</strong> at a price <span class="math notranslate nohighlight">\(P_t\)</span>.</p></li>
<li><p>The <strong>TRADER</strong> then agrees to sell this bond to the <strong>REPO DEALER</strong> while simultaneously agreeing to repurchase it at a future date for a predetermined price.</p></li>
</ul>
</li>
<li><p><strong>Exchange of Bond for Cash</strong>:</p>
<ul class="simple">
<li><p>The <strong>TRADER</strong> delivers the bond to the <strong>REPO DEALER</strong>.</p></li>
<li><p>In return, the <strong>REPO DEALER</strong> pays the <strong>TRADER</strong> an amount equal to <span class="math notranslate nohighlight">\(P_t\)</span> minus a ‚Äúhaircut.‚Äù The haircut is a discount on the bond‚Äôs value, which serves as a protection for the dealer against the risk of the bond‚Äôs price decline.</p></li>
</ul>
</li>
</ol>
</section>
<section id="at-time-t-t-n-text-days">
<h3>At Time <span class="math notranslate nohighlight">\(T = t + n \text{ days}\)</span><a class="headerlink" href="#at-time-t-t-n-text-days" title="Link to this heading">#</a></h3>
<ol class="arabic simple" start="3">
<li><p><strong>Repurchase of the Bond</strong>:</p>
<ul class="simple">
<li><p>At the end of the repo term, the <strong>TRADER</strong> repurchases the bond from the <strong>REPO DEALER</strong>.</p></li>
<li><p>The repurchase price is calculated as <span class="math notranslate nohighlight">\((P_t - \text{haircut}) \times \left(1 + \frac{\text{repo rate} \times n}{360}\right)\)</span>, where the repo rate is the interest rate agreed upon for the repo, and <span class="math notranslate nohighlight">\(n\)</span> is the number of days the repo agreement lasts.</p></li>
</ul>
</li>
<li><p><strong>Unwinding Bond Financing</strong>:</p>
<ul class="simple">
<li><p>The <strong>TRADER</strong> pays the calculated repurchase price to the <strong>REPO DEALER</strong> and receives the bond back.</p></li>
<li><p>If the <strong>TRADER</strong> does not refinance the bond, the <strong>TRADER</strong> sells the bond back to the <strong>MARKET</strong> for a price of <span class="math notranslate nohighlight">\(P_T\)</span>.</p></li>
</ul>
</li>
</ol>
<p>The repo transaction allows the <strong>TRADER</strong> to obtain short-term financing by temporarily transferring a security to a <strong>REPO DEALER</strong> in exchange for cash, with the agreement to buy back the security at a later date for a slightly higher price, the difference being equivalent to the interest on the loan. The repo rate effectively acts as the interest rate on the cash borrowed by the <strong>TRADER</strong>.</p>
<p>In quantitative finance, repos are commonly used to raise short-term capital. They are also used for leveraged trades and managing liquidity. Repos are secured loans because they involve the transfer of securities; they are usually seen as low-risk instruments because the terms of the transaction are secured by the collateral, which is the bond in this case. That said, they can be used to create highly levered positions which are not low risk.</p>
<p>The haircut on the repo pins down the maximum amount of leverage that can be obtained with the repo. Such a position is highly risky.</p>
<div class="math notranslate nohighlight">
\[
\text{Repo interest} = \frac{n}{360} \times \text{Repo rate} \times (P_t - \text{haircut})
\]</div>
<p>and
$<span class="math notranslate nohighlight">\(
\text{Return on capital for TRADER} = \frac{P_T - P_t - \text{Repo interest}}{\text{Haircut}}
\)</span>$</p>
<p>Consider some back-of-the-envelop calculations within a highly simplified 2-period model to demonstrate this:</p>
<p><strong>Example 1:</strong>
No leverage, interest rates go down from 4% to 3%</p>
<div class="math notranslate nohighlight">
\[Ret = (97 ‚Äì 92 ‚Äì 4)/92 = 1.1\%\]</div>
<p><strong>Example 2:</strong>
Full leverage, interest rates go down from 4% to 3%</p>
<div class="math notranslate nohighlight">
\[Ret = (97 ‚Äì 92 ‚Äì 4)/(92*0.02) = 54\%\]</div>
<p><strong>Example 3:</strong>
Full leverage, interest rates go up from 4% to 5%</p>
<div class="math notranslate nohighlight">
\[Ret = (95 ‚Äì 92 ‚Äì 4)/(92*0.02) = -54\%\]</div>
</section>
</section>
<section id="money-market-dislocations-and-the-repo-rate-spikes-of-2018-2019">
<h2>Money market dislocations and the repo rate spikes of 2018-2019<a class="headerlink" href="#money-market-dislocations-and-the-repo-rate-spikes-of-2018-2019" title="Link to this heading">#</a></h2>
<p>Repo rates are the interest rates at which financial institutions borrow or lend funds via repurchase agreements (repos). In recent years, there have been several notable spikes in these rates. The most significant spike occurred in September 2019, although smaller spikes also occurred throughout 2018 and 2019. A repo spike refers to a sudden, substantial increase in repo rates within the financial market. These spikes indicate an abrupt imbalance in the supply and demand for funds in the repo market, leading to an increase in borrowing costs. Such spikes can disrupt the financial system and may signal deeper issues related to liquidity and funding stress.</p>
<p>Additionally, these rate spikes can be seen as dislocations in the money markets. Specifically, these repo spikes represented significant deviations between repo rates and the interest on reserve balances or the Federal Reserve‚Äôs Overnight Reverse Repo Facility rate (ON/RRP rate). These dislocations imply potential arbitrage opportunities, suggesting that institutions capable of earning interest on reserves or with access to the Fed‚Äôs ON/RRP facility should theoretically show no preference between using these facilities and lending in the repo markets. Since lending in repo markets typically involves overcollateralization with Treasury securities and occurs overnight, repo market rates should align closely with other near risk-free rates. Understanding the causes of these deviations is crucial for grasping their implications for the financial sector.</p>
</section>
<section id="relationship-to-quantitative-investors">
<h2>Relationship to Quantitative Investors<a class="headerlink" href="#relationship-to-quantitative-investors" title="Link to this heading">#</a></h2>
<p>See here: <a class="reference external" href="https://www.bloomberg.com/news/articles/2023-12-20/inside-the-basis-trade-hedge-fund-traders-dominate-gigantic-bond-bet">https://www.bloomberg.com/news/articles/2023-12-20/inside-the-basis-trade-hedge-fund-traders-dominate-gigantic-bond-bet</a></p>
<p><img alt="The Hedge Fund Traders Dominating a Massive Bet on Bonds" src="../_images/hw01_basis_hf.png" /></p>
<p>And here: <a class="reference external" href="https://www.bloomberg.com/opinion/articles/2024-01-08/the-fed-won-t-do-slow-and-steady-if-the-labor-market-wobbles">https://www.bloomberg.com/opinion/articles/2024-01-08/the-fed-won-t-do-slow-and-steady-if-the-labor-market-wobbles</a></p>
<p><img alt="Year-End Money-Markets Angst on Fed Exit Echoes 2018 Crunch" src="../_images/hw01_repo_vol.png" /></p>
<p>What is a basis trade. From this <a class="reference external" href="https://www.reuters.com/markets/us/fed-economists-sound-alarm-hedge-funds-gaming-us-treasuries-2023-09-13/">Reuters article</a>, they say:</p>
<blockquote>
<div><p>Hedge funds‚Äô short positions in some Treasuries futures - contracts for the purchase and sale of bonds for future delivery - have recently hit record highs as part of so-called basis trades, which take advantage of the premium of futures contracts over the price of the underlying bonds, analysts have said.</p>
<p>The trades - typically the domain of macro hedge funds with relative value strategies - consist of selling a futures contract, buying Treasuries deliverable into that contract with repurchase agreement (repo) funding, and delivering them at contract expiry.</p>
</div></blockquote>
<p>The involvement of hedge funds and other asset management companies in this space have receive a lot of attention recently. Some examples:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.ft.com/content/927aba63-eff3-44c4-a5df-a5872e988720">Citadel‚Äôs Ken Griffin warns against hedge fund clampdown to curb basis trade risk</a></p></li>
<li><p><a class="reference external" href="https://www.ft.com/content/6a752818-3f05-45da-a6f9-c752710d0a9f">Taming the Treasury basis trade</a></p></li>
<li><p><a class="reference external" href="https://www.bloomberg.com/news/articles/2023-11-30/ken-griffin-s-citadel-hedge-fund-rivals-draw-scrutiny-over-crowding-leverage">Citadel and Its Peers Are Piling Into the Same Trades. Regulators Are Taking Notice</a></p></li>
<li><p><a class="reference external" href="https://www.reuters.com/markets/us/feds-reverse-repo-facility-drawdown-looms-large-balance-sheet-debate-2023-10-31/">Fed‚Äôs reverse repo facility drawdown looms large in balance sheet debate</a></p></li>
<li><p><a class="reference external" href="https://www.reuters.com/markets/us/fed-economists-sound-alarm-hedge-funds-gaming-us-treasuries-2023-09-13/">Fed economists sound alarm on hedge funds gaming US Treasuries</a></p></li>
</ul>
</section>
<section id="understanding-repo-markets-are-important-to-understanding-the-risks-involved-in-this-trade">
<h2>Understanding Repo Markets Are Important to Understanding the Risks involved in this Trade<a class="headerlink" href="#understanding-repo-markets-are-important-to-understanding-the-risks-involved-in-this-trade" title="Link to this heading">#</a></h2>
<p>In this homework assignment, we‚Äôll create some charts to better understand this market. I also recommend reading this paper, <a class="reference external" href="https://elischolar.library.yale.edu/journal-of-financial-crises/vol5/iss4/1/">Kahn et al (2023). ‚ÄúAnatomy of the Repo Rate Spikes in September 2019.‚Äù Journal of Financial Crises 5, no. 4 (2023): 1-25.</a></p>
<p>We‚Äôll replicate Figure 1 from this paper.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">load_repo_data</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">config</span>

<span class="n">OUTPUT_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">OUTPUT_DIR</span><span class="p">)</span>
<span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">DATA_DIR</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="repo-rates-and-fed-funds-rates">
<h2>Repo Rates and Fed Funds Rates<a class="headerlink" href="#repo-rates-and-fed-funds-rates" title="Link to this heading">#</a></h2>
<p>Replicate Figure 1 from ‚ÄúAnatomy of the Repo Rate Spikes‚Äù</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">load_repo_data</span><span class="o">.</span><span class="n">series_descriptions</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;DPCREDIT&#39;: &#39;Discount Window Primary Credit Rate&#39;,
 &#39;EFFR&#39;: &#39;Effective Federal Funds Rate&#39;,
 &#39;OBFR&#39;: &#39;Overnight Bank Funding Rate&#39;,
 &#39;SOFR&#39;: &#39;SOFR&#39;,
 &#39;IORR&#39;: &#39;Interest on Required Reserves&#39;,
 &#39;IOER&#39;: &#39;Interest on Excess Reserves&#39;,
 &#39;IORB&#39;: &#39;Interest on Reserve Balances&#39;,
 &#39;DFEDTARU&#39;: &#39;Federal Funds Target Range - Upper Limit&#39;,
 &#39;DFEDTARL&#39;: &#39;Federal Funds Target Range - Lower Limit&#39;,
 &#39;WALCL&#39;: &#39;Federal Reserve Total Assets&#39;,
 &#39;TOTRESNS&#39;: &#39;Reserves of Depository Institutions: Total&#39;,
 &#39;TREAST&#39;: &#39;Treasuries Held by Federal Reserve&#39;,
 &#39;CURRCIR&#39;: &#39;Currency in Circulation&#39;,
 &#39;GFDEBTN&#39;: &#39;Federal Debt: Total Public Debt&#39;,
 &#39;WTREGEN&#39;: &#39;Treasury General Account&#39;,
 &#39;RRPONTSYAWARD&#39;: &#39;Fed ON/RRP Award Rate&#39;,
 &#39;RRPONTSYD&#39;: &#39;Treasuries Fed Sold In Temp Open Mark&#39;,
 &#39;RPONTSYD&#39;: &#39;Treasuries Fed Purchased In Temp Open Mark&#39;,
 &#39;WSDONTL&#39;: &#39;SOMA Sec Overnight Lending Volume&#39;,
 &#39;MY_RPONTSYAWARD&#39;: &#39;Fed ON/RP Award Rate&#39;,
 &#39;Gen_IORB&#39;: &#39;Interest on Reserves&#39;,
 &#39;ONRRP_CTPY_LIMIT&#39;: &#39;Counter-party Limit at Fed ON/RRP Facility&#39;,
 &#39;ONRP_AGG_LIMIT&#39;: &#39;Aggregate Limit at Fed Standing Repo Facility&#39;,
 &#39;REPO-TRI_AR_OO-P&#39;: &#39;Tri-Party Average Rate: Overnight/Open (Preliminary)&#39;,
 &#39;REPO-TRI_TV_OO-P&#39;: &#39;Tri-Party Transaction Volume: Overnight/Open (Preliminary)&#39;,
 &#39;REPO-TRI_TV_TOT-P&#39;: &#39;Tri-Party Transaction Volume: Total (Preliminary)&#39;,
 &#39;REPO-DVP_AR_OO-P&#39;: &#39;DVP Service Average Rate: Overnight/Open (Preliminary)&#39;,
 &#39;REPO-DVP_TV_OO-P&#39;: &#39;DVP Service Transaction Volume: Overnight/Open (Preliminary)&#39;,
 &#39;REPO-DVP_TV_TOT-P&#39;: &#39;DVP Service Transaction Volume: Total (Preliminary)&#39;,
 &#39;REPO-DVP_OV_TOT-P&#39;: &#39;DVP Service Outstanding Volume: Total (Preliminary)&#39;,
 &#39;REPO-GCF_AR_OO-P&#39;: &#39;GCF Repo Service Average Rate: Overnight/Open (Preliminary)&#39;,
 &#39;REPO-GCF_TV_OO-P&#39;: &#39;GCF Repo Service Transaction Volume: Overnight/Open (Preliminary)&#39;,
 &#39;REPO-GCF_TV_TOT-P&#39;: &#39;GCF Repo Service Transaction Volume: Total (Preliminary)&#39;,
 &#39;FNYR-BGCR-A&#39;: &#39;Broad General Collateral Rate&#39;,
 &#39;FNYR-TGCR-A&#39;: &#39;Tri-Party General Collateral Rate&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_labels</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">:</span><span class="s1">&#39;Tri-Party Overnight Average Rate&#39;</span><span class="p">,</span>
    <span class="s1">&#39;RRPONTSYAWARD&#39;</span><span class="p">:</span> <span class="s1">&#39;ON-RRP facility rate&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Gen_IORB&#39;</span><span class="p">:</span> <span class="s1">&#39;Interest on Reserves&#39;</span><span class="p">,</span> <span class="c1"># This series uses FRED&#39;s Interest on </span>
    <span class="c1"># Reserve Balances series. However, this doesn&#39;t go back very far, so it is</span>
    <span class="c1"># backfilled with interest on excess reserves when necessary.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_repo_data</span><span class="o">.</span><span class="n">load_all</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">DATA_DIR</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The following plot show the effective fed funds rate (from FRED), the tri-party overnight average rate (from the OFR series <code class="docutils literal notranslate"><span class="pre">REPO-TRI_AR_OO-P</span></code>), and the shaded region shows the lower and upper limit of the federal funds target range (<code class="docutils literal notranslate"><span class="pre">DFEDTARL</span></code> and <code class="docutils literal notranslate"><span class="pre">DFEDTARU</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;EFFR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_labels</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/9b08dfbe3408e9381151ace1770dcf466286668f85b63b216b1e614fc4e24f02.png" src="../_images/9b08dfbe3408e9381151ace1770dcf466286668f85b63b216b1e614fc4e24f02.png" />
</div>
</div>
<p>In the following plot, we zoom in a little to see just how large these spikes were.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">date_start</span> <span class="o">=</span> <span class="s1">&#39;2014-Aug&#39;</span>
<span class="n">date_end</span> <span class="o">=</span> <span class="s1">&#39;2019-Dec&#39;</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">date_start</span><span class="p">:</span><span class="n">date_end</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">],</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[[</span><span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;EFFR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_labels</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="c1"># plt.ylim(-0.2, 1.0)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/d918bb2652e248800452f9d2fb733a9e6ddb38f8316134f75daf9149368c115d.png" src="../_images/d918bb2652e248800452f9d2fb733a9e6ddb38f8316134f75daf9149368c115d.png" />
</div>
</div>
<p>Normalize rates to be centered at the fed funds target window midpoint.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_norm</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;target_midpoint&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">,</span> <span class="s1">&#39;DFEDTARL&#39;</span><span class="p">,</span> <span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> 
          <span class="s1">&#39;EFFR&#39;</span><span class="p">,</span> <span class="s1">&#39;target_midpoint&#39;</span><span class="p">,</span> 
          <span class="s1">&#39;Gen_IORB&#39;</span><span class="p">,</span> <span class="s1">&#39;RRPONTSYAWARD&#39;</span><span class="p">,</span> <span class="s1">&#39;SOFR&#39;</span><span class="p">]:</span>
    <span class="n">df_norm</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;target_midpoint&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Now, plot the series that is normalized by the fed funds target midpoint.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">date_start</span> <span class="o">=</span> <span class="s1">&#39;2014-Aug&#39;</span>
<span class="n">date_end</span> <span class="o">=</span> <span class="s1">&#39;2019-Dec&#39;</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">df_norm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">date_start</span><span class="p">:</span><span class="n">date_end</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">],</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[[</span><span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;EFFR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_labels</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Spread of federal feds target midpoint (percent)&quot;</span><span class="p">)</span>
<span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> 
    <span class="n">arrowstyle</span> <span class="o">=</span> <span class="s2">&quot;-&gt;&quot;</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;Sep. 17, 2019: 3.06%&#39;</span><span class="p">,</span> 
            <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;2019-Sep-17&#39;</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">),</span> 
            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;2017-Oct-27&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span>
            <span class="n">arrowprops</span> <span class="o">=</span> <span class="n">arrowprops</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c6d4f4deac055243c42282003776fbfe1da4a8025c0c73ccb5745fba3455b001.png" src="../_images/c6d4f4deac055243c42282003776fbfe1da4a8025c0c73ccb5745fba3455b001.png" />
</div>
</div>
<p>Now, let‚Äôs consider interest on reserves as well as the ON-RRP rate, as these in theory put bounds on the repo rate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">date_start</span> <span class="o">=</span> <span class="s1">&#39;2014-Aug&#39;</span>
<span class="n">date_end</span> <span class="o">=</span> <span class="s1">&#39;2019-Dec&#39;</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">df_norm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">date_start</span><span class="p">:</span><span class="n">date_end</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">],</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[[</span><span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;EFFR&#39;</span><span class="p">,</span> <span class="s1">&#39;Gen_IORB&#39;</span><span class="p">,</span> <span class="s1">&#39;RRPONTSYAWARD&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_labels</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Spread of federal feds target midpoint (percent)&quot;</span><span class="p">)</span>
<span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> 
    <span class="n">arrowstyle</span> <span class="o">=</span> <span class="s2">&quot;-&gt;&quot;</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;Sep. 17, 2019: 3.06%&#39;</span><span class="p">,</span> 
            <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;2019-Sep-17&#39;</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">),</span> 
            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;2017-Oct-27&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span>
            <span class="n">arrowprops</span> <span class="o">=</span> <span class="n">arrowprops</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5603bcc75751f09725f9b7818a6dbf2424ba9e60cc482b79e2da41bdd3a254ab.png" src="../_images/5603bcc75751f09725f9b7818a6dbf2424ba9e60cc482b79e2da41bdd3a254ab.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">date_start</span> <span class="o">=</span> <span class="s1">&#39;2018-Apr&#39;</span>
<span class="n">date_end</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">df_norm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">date_start</span><span class="p">:</span><span class="n">date_end</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">],</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[[</span><span class="s1">&#39;SOFR&#39;</span><span class="p">,</span> <span class="s1">&#39;EFFR&#39;</span><span class="p">,</span> <span class="s1">&#39;Gen_IORB&#39;</span><span class="p">,</span> <span class="s1">&#39;RRPONTSYAWARD&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_labels</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Spread of federal feds target midpoint (percent)&quot;</span><span class="p">)</span>
<span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> 
    <span class="n">arrowstyle</span> <span class="o">=</span> <span class="s2">&quot;-&gt;&quot;</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="c1"># ax.annotate(&#39;Sep. 17, 2019: 3.06%&#39;, </span>
<span class="c1">#             xy=(&#39;2019-Sep-17&#39;, 0.95), </span>
<span class="c1">#             xytext=(&#39;2015-Oct-27&#39;, 0.9),</span>
<span class="c1">#             arrowprops = arrowprops);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x159cf4290&gt;
</pre></div>
</div>
<img alt="../_images/e34c0fd0d4a1fc6f60b51fad5c50ab7a2030c4536aeed2ed99f5cdc7eecb4e05.png" src="../_images/e34c0fd0d4a1fc6f60b51fad5c50ab7a2030c4536aeed2ed99f5cdc7eecb4e05.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">date_start</span> <span class="o">=</span> <span class="s1">&#39;2023-Jul&#39;</span>
<span class="n">date_end</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">df_norm</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">date_start</span><span class="p">:</span><span class="n">date_end</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">],</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;DFEDTARL&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[[</span><span class="s1">&#39;SOFR&#39;</span><span class="p">,</span> <span class="s1">&#39;EFFR&#39;</span><span class="p">,</span> <span class="s1">&#39;Gen_IORB&#39;</span><span class="p">,</span> <span class="s1">&#39;RRPONTSYAWARD&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">new_labels</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Spread of federal feds target midpoint (percent)&quot;</span><span class="p">)</span>
<span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span> 
    <span class="n">arrowstyle</span> <span class="o">=</span> <span class="s2">&quot;-&gt;&quot;</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="c1"># ax.annotate(&#39;Sep. 17, 2019: 3.06%&#39;, </span>
<span class="c1">#             xy=(&#39;2019-Sep-17&#39;, 0.95), </span>
<span class="c1">#             xytext=(&#39;2015-Oct-27&#39;, 0.9),</span>
<span class="c1">#             arrowprops = arrowprops);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x15a8eb5c0&gt;
</pre></div>
</div>
<img alt="../_images/c46d5623bcf2e7e278b488c5c6ca7a72e82312929fc0a2bede4d80c767d4cf01.png" src="../_images/c46d5623bcf2e7e278b488c5c6ca7a72e82312929fc0a2bede4d80c767d4cf01.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Gen_IORB&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2018&#39;</span><span class="p">:</span><span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/a427c700faf1a63b798eade36a5a62d6aba2ab473eb96768f8eae86b602d9053.png" src="../_images/a427c700faf1a63b798eade36a5a62d6aba2ab473eb96768f8eae86b602d9053.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2018&#39;</span><span class="p">:,</span> <span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/6daf68ffe098a8caf17e86a1a980a54ac465860907e42ff906a796524f45c136.png" src="../_images/6daf68ffe098a8caf17e86a1a980a54ac465860907e42ff906a796524f45c136.png" />
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="understanding-this-plot">
<h1>Understanding this plot<a class="headerlink" href="#understanding-this-plot" title="Link to this heading">#</a></h1>
<p>Now, let‚Äôs spend some time trying to understand this plot.</p>
<section id="reserve-levels-vs-spikes">
<h2>Reserve Levels vs Spikes<a class="headerlink" href="#reserve-levels-vs-spikes" title="Link to this heading">#</a></h2>
<p>First of all, depository intitutions have a choice between keeping their reserves at the Fed and earning interest on reserve balances or lending the money into repo. When the repo rates were spiking in 2018 and 2019, I would imagine that total reserve levels would be low.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;net_fed_repo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;RPONTSYD&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;RRPONTSYD&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;RRPONTSYAWARD&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;total reserves / currency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TOTRESNS&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;CURRCIR&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;TOTRESNS&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">load_repo_data</span><span class="o">.</span><span class="n">series_descriptions</span>
<span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;$ Billions&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Basis Points&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">))</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">:</span><span class="s1">&#39;Tri-Party - Fed ON/RRP Rate&#39;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/807c467e957fe2a2fc062493ccc3c034c141c1b5e94c6b8221daacd1db5253db.png" src="../_images/807c467e957fe2a2fc062493ccc3c034c141c1b5e94c6b8221daacd1db5253db.png" />
</div>
</div>
<p>Now, let‚Äôs normalize by currency in circulation, so as to account for the normal growth in the economy or the financial system. This is done because total reserves is not stationary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;total reserves / currency&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">:</span><span class="s1">&#39;Tri-Party - Fed ON/RRP Rate&#39;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Ratio&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Basis Points&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">))</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
<span class="c1"># Total Reserves held by depository institutions, divided by currency in circulation</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/525246a89378b908eea74cb50f782ba2540f73d44d2070b3e86d219ce0bb81d4.png" src="../_images/525246a89378b908eea74cb50f782ba2540f73d44d2070b3e86d219ce0bb81d4.png" />
</div>
</div>
</section>
<section id="fed-repo-and-reverse-repo-facility-takeup">
<h2>Fed Repo and Reverse Repo Facility Takeup<a class="headerlink" href="#fed-repo-and-reverse-repo-facility-takeup" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;RPONTSYD&#39;</span><span class="p">,</span><span class="s1">&#39;RRPONTSYD&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">load_repo_data</span><span class="o">.</span><span class="n">series_descriptions</span>
<span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/49ab623594e9fa7eef2195b4e6b3b99ea94f4e10ca468447d161f2d39bdbdaa6.png" src="../_images/49ab623594e9fa7eef2195b4e6b3b99ea94f4e10ca468447d161f2d39bdbdaa6.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Net Fed Repo Lending (positive is net lending by the Fed.</span>
<span class="c1"># Negative is the use of the reverse repo facility.)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;net_fed_repo&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;$ Trillions&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/fee2b9c1e8bc0eb3c32b55dc83c89241841d44077235153dbf4c274adb98cf97.png" src="../_images/fee2b9c1e8bc0eb3c32b55dc83c89241841d44077235153dbf4c274adb98cf97.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO</span>
<span class="c1"># # Net Fed Repo Lending (positive is net lending by the Fed.</span>
<span class="c1"># # Negative is the use of the reverse repo facility.)</span>
<span class="c1"># df.loc[&#39;2023&#39;,[&#39;net_fed_repo&#39;]].plot()</span>
<span class="c1"># plt.ylabel(&#39;$ Trillions&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;net_fed_repo&#39;</span><span class="p">,</span> <span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">100</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-50.0, 100.0)
</pre></div>
</div>
<img alt="../_images/f98f454c68d42a90ff50286c616d62240613d74d1b2bbb0571db920d3c8c59af.png" src="../_images/f98f454c68d42a90ff50286c616d62240613d74d1b2bbb0571db920d3c8c59af.png" />
</div>
</div>
<p>The Fed is lending money when the repo rate is spiking. When the repo rate is low relative to the ON/RRP rate, usage of the ON/RRP facility goes up, as can be seen here.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;net_fed_repo&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;triparty_less_fed_onrrp_rate&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/04e423ed395d3fab17b3ecedcbc4c4087ec82767a45a28a3e0bb2c546cbec164.png" src="../_images/04e423ed395d3fab17b3ecedcbc4c4087ec82767a45a28a3e0bb2c546cbec164.png" />
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="how-should-we-define-a-repo-spike">
<h1>How should we define a repo spike?<a class="headerlink" href="#how-should-we-define-a-repo-spike" title="Link to this heading">#</a></h1>
<p>Now, I turn to the question of how to define a repo rate spike.</p>
<section id="fed-funds-target-range">
<h2>Fed Fund‚Äôs Target Range<a class="headerlink" href="#fed-funds-target-range" title="Link to this heading">#</a></h2>
<p>The first way to approach this is to just look at when the triparty rate exceeded the upper bound of the fed‚Äôs federal funds rate target range.</p>
<p><strong>Tri-Party Ave vs Fed Upper Limit</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_tri_above_fed_upper&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_tri_above_fed_upper&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2018-03-29&#39;, &#39;2018-04-02&#39;, &#39;2018-04-03&#39;, &#39;2018-05-31&#39;,
               &#39;2018-06-01&#39;, &#39;2018-06-04&#39;, &#39;2018-06-29&#39;, &#39;2018-11-15&#39;,
               &#39;2018-11-30&#39;, &#39;2018-12-06&#39;, &#39;2018-12-07&#39;, &#39;2018-12-17&#39;,
               &#39;2018-12-18&#39;, &#39;2018-12-19&#39;, &#39;2018-12-31&#39;, &#39;2019-01-02&#39;,
               &#39;2019-01-03&#39;, &#39;2019-01-31&#39;, &#39;2019-02-28&#39;, &#39;2019-03-29&#39;,
               &#39;2019-04-30&#39;, &#39;2019-05-01&#39;, &#39;2019-07-03&#39;, &#39;2019-07-05&#39;,
               &#39;2019-07-31&#39;, &#39;2019-09-16&#39;, &#39;2019-09-17&#39;, &#39;2019-09-18&#39;,
               &#39;2019-09-30&#39;, &#39;2019-10-16&#39;, &#39;2020-03-04&#39;, &#39;2020-03-16&#39;,
               &#39;2020-03-17&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;DATE&#39;, freq=None)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_tri_above_fed_upper&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>33
</pre></div>
</div>
</div>
</div>
<p><strong>SOFR vs Fed Upper Limit</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_fed_upper&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;DFEDTARU&#39;</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_fed_upper&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>44
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_fed_upper&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2018-04-03&#39;, &#39;2018-04-11&#39;, &#39;2018-04-16&#39;, &#39;2018-04-17&#39;,
               &#39;2018-04-30&#39;, &#39;2018-05-01&#39;, &#39;2018-05-15&#39;, &#39;2018-05-31&#39;,
               &#39;2018-06-01&#39;, &#39;2018-06-04&#39;, &#39;2018-06-29&#39;, &#39;2018-07-02&#39;,
               &#39;2018-11-15&#39;, &#39;2018-11-16&#39;, &#39;2018-11-30&#39;, &#39;2018-12-04&#39;,
               &#39;2018-12-06&#39;, &#39;2018-12-07&#39;, &#39;2018-12-17&#39;, &#39;2018-12-18&#39;,
               &#39;2018-12-19&#39;, &#39;2018-12-31&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;,
               &#39;2019-01-31&#39;, &#39;2019-02-28&#39;, &#39;2019-03-29&#39;, &#39;2019-04-30&#39;,
               &#39;2019-05-01&#39;, &#39;2019-07-02&#39;, &#39;2019-07-03&#39;, &#39;2019-07-05&#39;,
               &#39;2019-07-31&#39;, &#39;2019-09-16&#39;, &#39;2019-09-17&#39;, &#39;2019-09-18&#39;,
               &#39;2019-09-25&#39;, &#39;2019-09-30&#39;, &#39;2019-10-16&#39;, &#39;2019-10-31&#39;,
               &#39;2020-03-16&#39;, &#39;2020-03-17&#39;, &#39;2024-10-01&#39;, &#39;2024-12-26&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;DATE&#39;, freq=None)
</pre></div>
</div>
</div>
</div>
<p><strong>SOFR vs Interest of Reserves</strong></p>
<p>This measure is good because it represents a kind of arbitrage opportunity. Either leave money at Fed to earn interest, or put money into repo market. This is what the paper, ‚ÄúReserves were not so amply after all‚Äù uses.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;DATE&#39;&gt;
</pre></div>
</div>
<img alt="../_images/fcae71e6f06bc32b75ee8b5034016c4731b717109b71fa25a1dba885245c0ef4.png" src="../_images/fcae71e6f06bc32b75ee8b5034016c4731b717109b71fa25a1dba885245c0ef4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_IORB&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_IORB&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>263
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_IORB&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2018-04-03&#39;, &#39;2018-04-11&#39;, &#39;2018-04-16&#39;, &#39;2018-04-17&#39;,
               &#39;2018-04-30&#39;, &#39;2018-05-01&#39;, &#39;2018-05-15&#39;, &#39;2018-05-31&#39;,
               &#39;2018-06-01&#39;, &#39;2018-06-04&#39;,
               ...
               &#39;2020-07-21&#39;, &#39;2020-11-02&#39;, &#39;2020-11-05&#39;, &#39;2021-01-05&#39;,
               &#39;2024-09-30&#39;, &#39;2024-10-01&#39;, &#39;2024-10-02&#39;, &#39;2024-12-26&#39;,
               &#39;2024-12-27&#39;, &#39;2024-12-31&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;DATE&#39;, length=263, freq=None)
</pre></div>
</div>
</div>
</div>
<p>Now, let‚Äôs ask if it‚Äôs 2 standard deviations above IORB</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.10564472039886282
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_2std_above_IORB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_2std_above_IORB&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>12
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_2std_above_IORB&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2018-12-31&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-03-29&#39;,
               &#39;2019-04-30&#39;, &#39;2019-07-05&#39;, &#39;2019-09-16&#39;, &#39;2019-09-17&#39;,
               &#39;2019-09-18&#39;, &#39;2019-09-30&#39;, &#39;2019-10-16&#39;, &#39;2020-03-17&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;DATE&#39;, freq=None)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;SOFR-IORB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-0.04800699300699316
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_2std_above_IORB&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_fed_upper&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2018-12-31&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-03-29&#39;,
               &#39;2019-04-30&#39;, &#39;2019-07-05&#39;, &#39;2019-09-16&#39;, &#39;2019-09-17&#39;,
               &#39;2019-09-18&#39;, &#39;2019-09-30&#39;, &#39;2019-10-16&#39;, &#39;2020-03-17&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;DATE&#39;, freq=None)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_2std_above_IORB&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;is_SOFR_above_fed_upper&#39;</span><span class="p">]]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>12
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># filedir = Path(OUTPUT_DIR)</span>
<span class="c1"># df[</span>
<span class="c1">#     [&#39;is_SOFR_above_fed_upper&#39;, &#39;is_SOFR_2std_above_IORB&#39;, </span>
<span class="c1">#     &#39;is_SOFR_above_IORB&#39;, &#39;is_tri_above_fed_upper&#39;]</span>
<span class="c1">#   ].to_csv(filedir / &#39;is_spike.csv&#39;)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="summary-stats-about-various-repo-rates">
<h1>Summary Stats about Various Repo Rates<a class="headerlink" href="#summary-stats-about-various-repo-rates" title="Link to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 4797 entries, 2012-01-01 to 2025-02-17
Freq: D
Data columns (total 43 columns):
 #   Column                        Non-Null Count  Dtype  
---  ------                        --------------  -----  
 0   DPCREDIT                      4796 non-null   float64
 1   EFFR                          3295 non-null   float64
 2   OBFR                          3276 non-null   float64
 3   SOFR                          1716 non-null   float64
 4   IORR                          3497 non-null   float64
 5   IOER                          3497 non-null   float64
 6   IORB                          1300 non-null   float64
 7   DFEDTARU                      4797 non-null   float64
 8   DFEDTARL                      4797 non-null   float64
 9   WALCL                         4794 non-null   float64
 10  TOTRESNS                      4797 non-null   float64
 11  TREAST                        4794 non-null   float64
 12  CURRCIR                       4797 non-null   float64
 13  GFDEBTN                       51 non-null     float64
 14  WTREGEN                       4794 non-null   float64
 15  RRPONTSYAWARD                 4166 non-null   float64
 16  RRPONTSYD                     4797 non-null   float64
 17  RPONTSYD                      4797 non-null   float64
 18  WSDONTL                       4794 non-null   float64
 19  Gen_IORB                      4797 non-null   float64
 20  ONRRP_CTPY_LIMIT              4167 non-null   float64
 21  ONRP_AGG_LIMIT                1301 non-null   float64
 22  REPO-TRI_AR_OO-P              2598 non-null   float64
 23  REPO-TRI_TV_OO-P              2598 non-null   float64
 24  REPO-TRI_TV_TOT-P             2599 non-null   float64
 25  REPO-DVP_AR_OO-P              1595 non-null   float64
 26  REPO-DVP_TV_OO-P              1595 non-null   float64
 27  REPO-DVP_TV_TOT-P             1692 non-null   float64
 28  REPO-DVP_OV_TOT-P             1692 non-null   float64
 29  REPO-GCF_AR_OO-P              108 non-null    float64
 30  REPO-GCF_TV_OO-P              108 non-null    float64
 31  REPO-GCF_TV_TOT-P             1692 non-null   float64
 32  FNYR-BGCR-A                   1717 non-null   float64
 33  FNYR-TGCR-A                   1717 non-null   float64
 34  target_midpoint               4797 non-null   float64
 35  SOFR-IORB                     1716 non-null   float64
 36  net_fed_repo                  4797 non-null   float64
 37  triparty_less_fed_onrrp_rate  2598 non-null   float64
 38  total reserves / currency     4797 non-null   float64
 39  is_tri_above_fed_upper        4797 non-null   bool   
 40  is_SOFR_above_fed_upper       4797 non-null   bool   
 41  is_SOFR_above_IORB            4797 non-null   bool   
 42  is_SOFR_2std_above_IORB       4797 non-null   bool   
dtypes: bool(4), float64(39)
memory usage: 1.6 MB
</pre></div>
</div>
</div>
</div>
<p>I don‚Äôt include GCF in this first comparison, because it has a lot of missing values. I want to only compare values for which all rates are non-null. That‚Äôs why I drop the whole row when any rate is missing.</p>
<p>Here, we see that DVP average is lower than Triparty average. SOFR is closer to triparty, but is still lower. This is because SOFR tries to remove specials.</p>
<p>Notice, however, that this is different when comparing the 75% percentiles. SOFR is higher than triparty and DVP is even higher.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;SOFR&#39;</span><span class="p">,</span> <span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;REPO-DVP_AR_OO-P&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SOFR</th>
      <th>REPO-TRI_AR_OO-P</th>
      <th>REPO-DVP_AR_OO-P</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1594.000000</td>
      <td>1594.000000</td>
      <td>1594.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2.381713</td>
      <td>2.365270</td>
      <td>2.363350</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.024534</td>
      <td>1.997887</td>
      <td>2.029237</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.010000</td>
      <td>0.020000</td>
      <td>-0.080000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.090000</td>
      <td>0.100000</td>
      <td>0.090000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2.180000</td>
      <td>2.170000</td>
      <td>2.160000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>4.587500</td>
      <td>4.540000</td>
      <td>4.597500</td>
    </tr>
    <tr>
      <th>max</th>
      <td>5.400000</td>
      <td>5.330000</td>
      <td>5.430000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now, I include GCF. It appears that GCF is the highest. Borrow low at tri-party, lend higher into SOFR (but lower to specials) and lend highest to GCF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;SOFR&#39;</span><span class="p">,</span> <span class="s1">&#39;REPO-TRI_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;REPO-DVP_AR_OO-P&#39;</span><span class="p">,</span> <span class="s1">&#39;REPO-GCF_AR_OO-P&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SOFR</th>
      <th>REPO-TRI_AR_OO-P</th>
      <th>REPO-DVP_AR_OO-P</th>
      <th>REPO-GCF_AR_OO-P</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>107.000000</td>
      <td>107.000000</td>
      <td>107.000000</td>
      <td>107.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>3.303551</td>
      <td>3.285047</td>
      <td>3.282804</td>
      <td>3.372991</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.716303</td>
      <td>1.708324</td>
      <td>1.718643</td>
      <td>1.725246</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.010000</td>
      <td>0.040000</td>
      <td>-0.010000</td>
      <td>0.030000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.110000</td>
      <td>2.085000</td>
      <td>2.085000</td>
      <td>2.200000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2.990000</td>
      <td>3.010000</td>
      <td>2.850000</td>
      <td>3.050000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>5.050000</td>
      <td>5.040000</td>
      <td>5.025000</td>
      <td>5.130000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>5.400000</td>
      <td>5.320000</td>
      <td>5.390000</td>
      <td>5.470000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>

<div class="section ablog__blog_comments">
   
</div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Rate Spikes in the Market for Repurchase Agreements</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-the-role-of-the-repo-market-and-why-is-it-important">What is the role of the repo market and why is it important?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-repurchase-agreement">What is a repurchase agreement?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at-time-t">At Time <span class="math notranslate nohighlight">\(t\)</span></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at-time-t-t-n-text-days">At Time <span class="math notranslate nohighlight">\(T = t + n \text{ days}\)</span></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#money-market-dislocations-and-the-repo-rate-spikes-of-2018-2019">Money market dislocations and the repo rate spikes of 2018-2019</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relationship-to-quantitative-investors">Relationship to Quantitative Investors</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-repo-markets-are-important-to-understanding-the-risks-involved-in-this-trade">Understanding Repo Markets Are Important to Understanding the Risks involved in this Trade</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#repo-rates-and-fed-funds-rates">Repo Rates and Fed Funds Rates</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-this-plot">Understanding this plot</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reserve-levels-vs-spikes">Reserve Levels vs Spikes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fed-repo-and-reverse-repo-facility-takeup">Fed Repo and Reverse Repo Facility Takeup</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#how-should-we-define-a-repo-spike">How should we define a repo spike?</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fed-funds-target-range">Fed Fund‚Äôs Target Range</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-stats-about-various-repo-rates">Summary Stats about Various Repo Rates</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeremiah Bejarano
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2026, Jeremiah Bejarano.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>