
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Homework 5 &#8212; Full Stack Quantitative Finance</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=f23691d7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=8dbc1659"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'HW5';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Final Project" href="final_project.html" />
    <link rel="prev" title="Replicating the G√ºrkaynak, Sack, and Wright (2006) Treasury Yield Curve" href="notebooks/_02_replicate_GSW2005_ipynb.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>   
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Full Stack Quantitative Finance - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Full Stack Quantitative Finance - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Full Stack Quantitative Finance
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="README.html">Course Syllabus: FINM 32900, Winter 2026</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures üìñ</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w1.html">Week 1: GitHub, GitHub Classroom, and Virtual Environments</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week1/what_is_this_course_about.html">What is Full Stack Quantitative Finance? Why This Course?</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week1/reproducible_analytical_pipelines.html">What are Reproducible Analytical Pipelines?</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week1/case_study_reproducibility_in_finance.html">Case Study: Is There A Reproducibility Crisis In Finance?</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week1/virtual_environments.html">Virtual Environments</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w2.html">Week 2: Env Files and Secrets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week2/WRDS_intro_and_web_queries.html">Introduction to WRDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_01_wrds_python_package_ipynb.html">Example: Connecting to the WRDS Platform With Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_05_basics_of_SQL_ipynb.html">Basics of SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week2/env_files.html">Env Files, Secrets, and the Separations of Settings from Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week2/github_pages_preview.html">GitHub Pages and Tearsheets</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w3.html">Week 3: Task Runners, Automating Queries, and the Basics of SQL</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week3/what_is_a_task_runner.html">What is a build system or task runner?</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week3/doit_examples.html">PyDoit Examples Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week3/project_structure.html">Project Structure: ‚ÄúChartbook‚Äù Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week3/ftsfr.html">Financial Time Series Forecasting Repository (FTSFR)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w4.html">Week 4: Generating Reports, featuring Jupyter Notebooks and LaTeX</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week4/reports_with_jupyter_notebooks.html">Reports with Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week4/intro_to_LaTeX.html">Introduction to LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week4/latex_essentials.html">LaTeX Essentials</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w5.html">Week 5: Bloomberg, LSEG Datastream, and Databento</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week7/bloomberg_terminal.html">The Bloomberg Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week7/LSEG_datastream.html">LSEG Datastream</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week7/databento.html">Databento</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w6.html">Week 6: Python Package Development and Social Coding with GitHub</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week6/GitHub_pull_requests.html">GitHub Issues and Pull Requests: Enhancing Collaborative Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week6/python_packaging_with_hatch.html">Writing and Publishing Your Own Python Packages</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w7.html">Week 7: Unit Tests and Documentation with Sphinx</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week5/sphinx.html">Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week5/unit_tests.html">Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_01_corporate_hedging_ipynb.html">Case Study: Hedging Oil Price Exposure As An E&amp;P</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_02_spx_hedging_ipynb.html">Case Study: Hedging A Long-Only SPX Portfolio With Costless Collars</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w8.html">Week 8: Medium-Sized Data and Remote Machines</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week8/medium_sized_data_strategies.html">Strategies for Medium-Sized Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week8/polars_exercises.html">Polars Exercises: Code Snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week8/remote_machines_and_hpc.html">Remote Machines and High-Performance Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week8/exercise_jupyter_on_midway.html">Exercise: Jupyter Notebook on Midway via SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_01_data_sources_overview_ipynb.html">Data Sources Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_02_trace_cleaning_walkthrough_ipynb.html">Cleaning TRACE Corporate Bond Data: A Walkthrough</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="subject_to_change_after_this_week.html">WARNING: Notes subject to change after this week</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview_w9.html">Week 9: Web Authentication, GitHub Actions, and Publishing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Week8/web_authentication.html">Web Authentication and Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week9/github_actions_interactive_dashboard.html">Creating a Live Dashboard Example with GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week4/intro_to_LaTeX.html">Introduction to LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week4/latex_essentials.html">LaTeX Essentials</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Homework üìù</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="HW0.html">Homework 0</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="HW1.html">Homework 1</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_02_CRSP_market_index_ipynb.html">HW Guide Part A: CRSP Market Returns Indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_03_SP500_constituents_and_index_ipynb.html">HW Guide Part B: Reconstructing the S&amp;P 500 Index</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="HW2.html">Homework 2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_04_Fama_French_1993_ipynb.html">HW Guide Part A: Replicate Fama-French 1993</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="HW3.html">Homework 3</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="HW4.html">Homework 4</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_01_CRSP_treasury_overview_ipynb.html">CRSP Treasury Data Oveview</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/_02_replicate_GSW2005_ipynb.html">Replicating the G√ºrkaynak, Sack, and Wright (2006) Treasury Yield Curve</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Homework 5</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="final_project.html">Final Project</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="FinalProject/final_project_rubric.html">Final Project Instructions and Rubric</a></li>
<li class="toctree-l2"><a class="reference internal" href="FinalProject/potential_final_projects.html">List of Potential Final Projects</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jmbejara/blank_project" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jmbejara/blank_project/issues/new?title=Issue%20on%20page%20%2FHW5.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/HW5.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Homework 5</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-outcomes">Learning Outcomes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assignment">Assignment</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-set-up-your-working-directory-on-rcc">Part 1: Set Up Your Working Directory on RCC</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-ssh-into-midway3">Step 1: SSH into Midway3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-create-your-personal-directory-in-project-space">Step 2: Create your personal directory in project space</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-clone-the-clean-trace-repository">Step 3: Clone the Clean TRACE repository</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-set-up-the-conda-environment">Part 2: Set Up the Conda Environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-load-the-anaconda-module">Step 1: Load the Anaconda module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-create-a-conda-environment-in-project-space">Step 2: Create a conda environment in project space</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-configure-the-environment-file">Step 3: Configure the environment file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-configure-wrds-pgpass">Step 4: Configure WRDS <code class="docutils literal notranslate"><span class="pre">.pgpass</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-run-the-clean-trace-pipeline">Part 3: Run the Clean TRACE Pipeline</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-the-workflow">Understanding the workflow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-sbatch-script">The sbatch script</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#submit-the-batch-job">Submit the batch job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monitor-your-job">Monitor your job</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-4-launch-vs-code-on-midway-with-scode">Part 4: Launch VS Code on Midway with <code class="docutils literal notranslate"><span class="pre">scode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-load-the-required-modules">Step 1: Load the required modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-launch-the-vs-code-server">Step 2: Launch the VS Code server</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-set-up-ssh-port-forwarding">Step 3: Set up SSH port forwarding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-connect-via-your-browser">Step 4: Connect via your browser</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-managing-the-scode-session">Step 5: Managing the scode session</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-5-deliverables">Part 5: Deliverables</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section class="tex2jax_ignore mathjax_ignore" id="homework-5">
<h1>Homework 5<a class="headerlink" href="#homework-5" title="Link to this heading">#</a></h1>
<section id="learning-outcomes">
<h2>Learning Outcomes<a class="headerlink" href="#learning-outcomes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Connect to UChicago‚Äôs Midway3 HPC cluster via SSH</p></li>
<li><p>Set up a working directory and conda environment on a shared cluster</p></li>
<li><p>Run a real corporate bond data pipeline (Clean TRACE) using SLURM batch jobs</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">rsync</span></code> to copy pre-pulled data from the instructor‚Äôs project directory</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">scode</span></code> to launch a remote VS Code instance on a compute node</p></li>
<li><p>Use SSH port forwarding to access remote services from your laptop</p></li>
</ul>
</section>
<section id="assignment">
<h2>Assignment<a class="headerlink" href="#assignment" title="Link to this heading">#</a></h2>
<p>The assignment is located at the following GitHub Classroom link: <a class="reference external" href="https://classroom.github.com/a/xczDCvT_">https://classroom.github.com/a/xczDCvT_</a></p>
<p><strong>Due Date:</strong> Mar 8, 2026 at 6 pm CT</p>
<p>This is a lightweight assignment designed to give you hands-on experience with
the RCC Midway3 cluster. You will set up your environment, run the Clean TRACE
data pipeline as a batch job, and launch a remote VS Code session. This is
intentionally light so that you can focus on your final projects.</p>
</section>
<hr class="docutils" />
<section id="part-1-set-up-your-working-directory-on-rcc">
<h2>Part 1: Set Up Your Working Directory on RCC<a class="headerlink" href="#part-1-set-up-your-working-directory-on-rcc" title="Link to this heading">#</a></h2>
<section id="step-1-ssh-into-midway3">
<h3>Step 1: SSH into Midway3<a class="headerlink" href="#step-1-ssh-into-midway3" title="Link to this heading">#</a></h3>
<p>Open a terminal on your laptop and connect to Midway3:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>&lt;your-cnetid&gt;@midway3.rcc.uchicago.edu
</pre></div>
</div>
<p>You will be prompted for your password, followed by Duo multi-factor
authentication (MFA). After completing MFA, you will land on a <strong>login node</strong>.</p>
<div class="warning admonition">
<p class="admonition-title">Login nodes are shared</p>
<p>Login nodes are shared by all users. They are intended for lightweight tasks:
editing files, submitting jobs, transferring data. <strong>Do not run computationally
intensive work on login nodes.</strong> Use the job scheduler (SLURM) to request
dedicated compute resources instead.</p>
</div>
</section>
<section id="step-2-create-your-personal-directory-in-project-space">
<h3>Step 2: Create your personal directory in project space<a class="headerlink" href="#step-2-create-your-personal-directory-in-project-space" title="Link to this heading">#</a></h3>
<p>Your home directory (<code class="docutils literal notranslate"><span class="pre">/home/$USER</span></code>) has a small quota (~30 GB) and is not
suitable for large datasets or conda environments. Instead, use the shared
project directory for this course:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Location</p></th>
<th class="head"><p>Path</p></th>
<th class="head"><p>Quota</p></th>
<th class="head"><p>Backed Up</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Home</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/home/&lt;cnetid&gt;</span></code></p></td>
<td><p>30 GB</p></td>
<td><p>Yes</p></td>
<td><p>Config files, small scripts</p></td>
</tr>
<tr class="row-odd"><td><p>Project</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/project/finm32900</span></code></p></td>
<td><p>Large (shared)</p></td>
<td><p>Yes</p></td>
<td><p>Shared course data, virtual environments</p></td>
</tr>
<tr class="row-even"><td><p>Scratch</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/scratch/midway3/&lt;cnetid&gt;</span></code></p></td>
<td><p>Large</p></td>
<td><p><strong>No</strong></p></td>
<td><p>Temporary large files, intermediate results</p></td>
</tr>
</tbody>
</table>
</div>
<p>Create a personal directory in the project space:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>/project/finm32900/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="step-3-clone-the-clean-trace-repository">
<h3>Step 3: Clone the Clean TRACE repository<a class="headerlink" href="#step-3-clone-the-clean-trace-repository" title="Link to this heading">#</a></h3>
<p>Clone the case study repository into your project directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/project/finm32900/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>
git<span class="w"> </span>clone<span class="w"> </span>&lt;repo-url&gt;<span class="w"> </span>case_study_clean_trace
<span class="nb">cd</span><span class="w"> </span>case_study_clean_trace
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Always work in <code class="docutils literal notranslate"><span class="pre">/project/finm32900/${USER}/</span></code> for this course, not in <code class="docutils literal notranslate"><span class="pre">/home/</span></code>.
The home directory quota fills up quickly with Python environments and data files.</p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="part-2-set-up-the-conda-environment">
<h2>Part 2: Set Up the Conda Environment<a class="headerlink" href="#part-2-set-up-the-conda-environment" title="Link to this heading">#</a></h2>
<section id="step-1-load-the-anaconda-module">
<h3>Step 1: Load the Anaconda module<a class="headerlink" href="#step-1-load-the-anaconda-module" title="Link to this heading">#</a></h3>
<p>Midway uses a <strong>module system</strong> to manage software. Load the Anaconda module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>python/anaconda-2024.10
</pre></div>
</div>
<p>You can see all available modules with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>avail
</pre></div>
</div>
<div class="warning admonition">
<p class="admonition-title">Important</p>
<p>Do <strong>not</strong> run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">init</span></code> on RCC. It modifies your shell profile in ways
that conflict with the module system. Always use <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">activate</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span></code>.</p>
</div>
</section>
<section id="step-2-create-a-conda-environment-in-project-space">
<h3>Step 2: Create a conda environment in project space<a class="headerlink" href="#step-2-create-a-conda-environment-in-project-space" title="Link to this heading">#</a></h3>
<p>Create an isolated conda environment in your project directory (not in
<code class="docutils literal notranslate"><span class="pre">/home/</span></code>, to avoid quota issues):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>--prefix<span class="o">=</span>/project/finm32900/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>/envs/clean_trace<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.11<span class="w"> </span>-y
</pre></div>
</div>
<p>Activate the environment and install dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>activate<span class="w"> </span>/project/finm32900/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>/envs/clean_trace
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>To reactivate this environment in future sessions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>python/anaconda-2024.10
<span class="nb">source</span><span class="w"> </span>activate<span class="w"> </span>/project/finm32900/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>/envs/clean_trace
</pre></div>
</div>
</section>
<section id="step-3-configure-the-environment-file">
<h3>Step 3: Configure the environment file<a class="headerlink" href="#step-3-configure-the-environment-file" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>.env.example<span class="w"> </span>.env
</pre></div>
</div>
<p>Edit <code class="docutils literal notranslate"><span class="pre">.env</span></code> and set your WRDS username. Use the default small sample date
range (January‚ÄìFebruary 2024) to keep the run quick:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WRDS_USERNAME</span><span class="o">=</span><span class="s2">&quot;your_wrds_username&quot;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>By default, the pipeline processes only a 2-month sample (January‚ÄìFebruary
2024). This is intentional‚Äîit lets you run end-to-end quickly without
processing 20+ years of data. Do <strong>not</strong> uncomment <code class="docutils literal notranslate"><span class="pre">START_DATE</span></code> or <code class="docutils literal notranslate"><span class="pre">END_DATE</span></code>
unless you want a much longer run.</p>
</div>
</section>
<section id="step-4-configure-wrds-pgpass">
<h3>Step 4: Configure WRDS <code class="docutils literal notranslate"><span class="pre">.pgpass</span></code><a class="headerlink" href="#step-4-configure-wrds-pgpass" title="Link to this heading">#</a></h3>
<p>If you haven‚Äôt already set up passwordless WRDS authentication, run the
following on the <strong>login node</strong> (which has internet access):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import wrds; db = wrds.Connection(); db.close()&quot;</span>
</pre></div>
</div>
<p>This will prompt for your WRDS username and password and create the <code class="docutils literal notranslate"><span class="pre">~/.pgpass</span></code>
file.</p>
</section>
</section>
<hr class="docutils" />
<section id="part-3-run-the-clean-trace-pipeline">
<h2>Part 3: Run the Clean TRACE Pipeline<a class="headerlink" href="#part-3-run-the-clean-trace-pipeline" title="Link to this heading">#</a></h2>
<section id="understanding-the-workflow">
<h3>Understanding the workflow<a class="headerlink" href="#understanding-the-workflow" title="Link to this heading">#</a></h3>
<p>Worker nodes on Midway3 do <strong>not</strong> have internet access, so data pulls (WRDS,
Fama-French, etc.) cannot run inside a batch job. Instead, the instructor has
already pulled the data once on the head node. The sbatch script will <code class="docutils literal notranslate"><span class="pre">rsync</span></code>
this pre-pulled data into your project directory and then run the processing
pipeline.</p>
<p>The instructor‚Äôs pre-pulled data is located at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">finm32900</span><span class="o">/</span><span class="n">case_study_clean_trace</span><span class="o">/</span><span class="n">_data</span><span class="o">/</span><span class="n">pulled</span><span class="o">/</span>
</pre></div>
</div>
</section>
<section id="the-sbatch-script">
<h3>The sbatch script<a class="headerlink" href="#the-sbatch-script" title="Link to this heading">#</a></h3>
<p>The repository includes a <code class="docutils literal notranslate"><span class="pre">run-pipeline.sbatch</span></code> script that automates
everything. Here is the script with annotations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=clean-trace-pipeline</span>
<span class="c1">#SBATCH --output=%j_clean-trace-pipeline.out</span>
<span class="c1">#SBATCH --error=%j_clean-trace-pipeline.err</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --ntasks-per-node=1</span>
<span class="c1">#SBATCH --cpus-per-task=16</span>
<span class="c1">#SBATCH --mem-per-cpu=8000</span>
<span class="c1">#SBATCH --time=8:00:00</span>
<span class="c1">#SBATCH --account=finm32900</span>

<span class="nb">set</span><span class="w"> </span>-euo<span class="w"> </span>pipefail

<span class="c1"># --- Configuration ---</span>
<span class="nv">PROJECT_BASE</span><span class="o">=</span><span class="s2">&quot;/project/finm32900&quot;</span>
<span class="nv">WORK_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_BASE</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">/case_study_clean_trace&quot;</span>
<span class="nv">INSTRUCTOR_DATA</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_BASE</span><span class="si">}</span><span class="s2">/case_study_clean_trace/_data/pulled&quot;</span>
<span class="nv">STUDENT_DATA</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">WORK_DIR</span><span class="si">}</span><span class="s2">/_data/pulled&quot;</span>

<span class="c1"># --- Change to working directory ---</span>
<span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">WORK_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Working directory: </span><span class="si">${</span><span class="nv">WORK_DIR</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># --- Activate conda environment ---</span>
module<span class="w"> </span>load<span class="w"> </span>python/anaconda-2024.10
<span class="nb">source</span><span class="w"> </span>activate<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_BASE</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">/envs/clean_trace&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Activated conda environment&quot;</span>

<span class="c1"># --- Install/update dependencies ---</span>
pip<span class="w"> </span>install<span class="w"> </span>--quiet<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Dependencies up to date&quot;</span>

<span class="c1"># --- Rsync pulled data from instructor&#39;s project directory ---</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Syncing pulled data from instructor directory...&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">STUDENT_DATA</span><span class="si">}</span><span class="s2">&quot;</span>
rsync<span class="w"> </span>-a<span class="w"> </span>--info<span class="o">=</span>progress2<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTRUCTOR_DATA</span><span class="si">}</span><span class="s2">/&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">STUDENT_DATA</span><span class="si">}</span><span class="s2">/&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Data sync complete&quot;</span>

<span class="c1"># --- Tell doit to skip all pull tasks (data already synced) ---</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Marking pull tasks as ignored...&quot;</span>
doit<span class="w"> </span>ignore<span class="w"> </span>pull:fama_french<span class="w"> </span>pull:fisd<span class="w"> </span>pull:liu_wu<span class="w"> </span>pull:osbap<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>pull:trace_144a<span class="w"> </span>pull:trace_enhanced<span class="w"> </span>pull:trace_standard
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Pull tasks ignored&quot;</span>

<span class="c1"># --- Run the full pipeline ---</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Starting pipeline...&quot;</span>
doit
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">] Pipeline complete&quot;</span>
</pre></div>
</div>
<p>Key details about this script:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Directive</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--job-name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">clean-trace-pipeline</span></code></p></td>
<td><p>Human-readable name for your job</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--output</span></code> / <code class="docutils literal notranslate"><span class="pre">--error</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">%j_clean-trace-pipeline.out/.err</span></code></p></td>
<td><p>Stdout/stderr files (<code class="docutils literal notranslate"><span class="pre">%j</span></code> = job ID)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--nodes</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Use a single compute node</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--cpus-per-task</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">16</span></code></p></td>
<td><p>Request 16 CPU cores</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--mem-per-cpu</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8000</span></code></p></td>
<td><p>8 GB per CPU (128 GB total)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--time</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8:00:00</span></code></p></td>
<td><p>Maximum wall time of 8 hours</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--account</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">finm32900</span></code></p></td>
<td><p>Course billing account</p></td>
</tr>
</tbody>
</table>
</div>
<p>The script does the following:</p>
<ol class="arabic simple">
<li><p><strong>Rsync</strong> the instructor‚Äôs pre-pulled data into your <code class="docutils literal notranslate"><span class="pre">_data/pulled/</span></code> directory</p></li>
<li><p><strong>Mark pull tasks as ignored</strong> so that <code class="docutils literal notranslate"><span class="pre">doit</span></code> does not attempt to download data (compute nodes have no internet)</p></li>
<li><p><strong>Run the full pipeline</strong> with <code class="docutils literal notranslate"><span class="pre">doit</span></code>, which builds the FISD universe, filters TRACE, runs Stage 0 (Dick-Nielsen cleaning), and runs Stage 1 (bond analytics)</p></li>
</ol>
</section>
<section id="submit-the-batch-job">
<h3>Submit the batch job<a class="headerlink" href="#submit-the-batch-job" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbatch<span class="w"> </span>run-pipeline.sbatch
</pre></div>
</div>
<p>You should see output like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Submitted</span> <span class="n">batch</span> <span class="n">job</span> <span class="mi">12345678</span>
</pre></div>
</div>
</section>
<section id="monitor-your-job">
<h3>Monitor your job<a class="headerlink" href="#monitor-your-job" title="Link to this heading">#</a></h3>
<p>Use these commands to check on your job:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check job status</span>
squeue<span class="w"> </span>-u<span class="w"> </span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span>

<span class="c1"># View all partitions and node availability</span>
sinfo

<span class="c1"># Check your account balance (compute allocation)</span>
accounts<span class="w"> </span>balance

<span class="c1"># Follow the job&#39;s stdout in real time</span>
tail<span class="w"> </span>-f<span class="w"> </span>&lt;jobid&gt;_clean-trace-pipeline.out

<span class="c1"># Follow stderr</span>
tail<span class="w"> </span>-f<span class="w"> </span>&lt;jobid&gt;_clean-trace-pipeline.err

<span class="c1"># Cancel a job if needed</span>
scancel<span class="w"> </span>&lt;jobid&gt;
</pre></div>
</div>
<p>The pipeline processes 20+ years of TRACE corporate bond data through multiple
stages. Depending on queue wait times and system load, the full run can take
several hours.</p>
</section>
</section>
<hr class="docutils" />
<section id="part-4-launch-vs-code-on-midway-with-scode">
<h2>Part 4: Launch VS Code on Midway with <code class="docutils literal notranslate"><span class="pre">scode</span></code><a class="headerlink" href="#part-4-launch-vs-code-on-midway-with-scode" title="Link to this heading">#</a></h2>
<p>RCC provides a tool called <code class="docutils literal notranslate"><span class="pre">scode</span></code> that launches a VS Code web server on a
compute node, which you can then connect to from your laptop‚Äôs browser via
SSH port forwarding.</p>
<section id="step-1-load-the-required-modules">
<h3>Step 1: Load the required modules<a class="headerlink" href="#step-1-load-the-required-modules" title="Link to this heading">#</a></h3>
<p>On the Midway3 <strong>login node</strong>, load <code class="docutils literal notranslate"><span class="pre">scode</span></code> and the Anaconda module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>scode<span class="w"> </span>python/anaconda-2024.10
</pre></div>
</div>
</section>
<section id="step-2-launch-the-vs-code-server">
<h3>Step 2: Launch the VS Code server<a class="headerlink" href="#step-2-launch-the-vs-code-server" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>scode<span class="w"> </span>serve-web<span class="w"> </span>--<span class="w"> </span>--account<span class="w"> </span>finm32900<span class="w"> </span>--time<span class="w"> </span><span class="m">05</span>:00:00<span class="w"> </span>--mem<span class="w"> </span>16G
</pre></div>
</div>
<p>This submits a SLURM job that starts a VS Code web server on a compute node.
You should see output similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Removing existing symlink: /home/jbejarano/.vscode/cli/serve-web/072586267e68ece9a47aa43f8c108e0dcbf44622.
Linked /home/jbejarano/.scode/versions/stable/1.109.5/vscode-server-linux-x64-web to /home/jbejarano/.vscode/cli/serve-web/072586267e68ece9a47aa43f8c108e0dcbf44622
Submitting SBATCH to serve VSCode environment.

Submitted batch job 45863567

sbatch: Verify job submission ...
sbatch: Using a shared partition ...
sbatch: Partition: caslake
sbatch: QOS-Flag: caslake
sbatch: Account: finm32900
sbatch: Verification: ***PASSED***

SBATCH job /home/jbejarano/.scode/sbatches/scode-web_20260223_105124.sbatch submitted successfully.
Output will be directed to /home/jbejarano/.scode/logs/scode-web_45863567.out.
Errors will be directed to /home/jbejarano/.scode/logs/scode-web_45863567.err.

VSCode server is starting with Slurm Job ID 45863567.
Use `scode jobs status 45863567` to get server status and connection info.
Use `scancel 45863567` to cancel the server job.

VSCode job 45863567 is running on 1 nodes: midway3-0067
Primary node: 10.50.250.67
Environment: /home/jbejarano/.scode/envs/stable/default

To connect to the VSCode Web GUI you need to create an SSH tunnel from your
local machine to the primary node above. This can be done with the following
command to be run on your local machine (e.g., PowerShell in Windows):

    ssh -L 8000:10.50.250.67:58992 jbejarano@midway3.rcc.uchicago.edu

Once the tunnel is created, you may access the VSCode Web GUI by entering
the following address in your browser:

    http://localhost:8000/?tkn=SOME_LONG_TOKEN

Server outputs are being written to /home/jbejarano/.scode/logs/scode-web_45863567.out.
Server errors are being written to /home/jbejarano/.scode/logs/scode-web_45863567.err.
Use `squeue -j 45863567` to check the status of the job.
Use `scancel 45863567` to cancel the job.
</pre></div>
</div>
</section>
<section id="step-3-set-up-ssh-port-forwarding">
<h3>Step 3: Set up SSH port forwarding<a class="headerlink" href="#step-3-set-up-ssh-port-forwarding" title="Link to this heading">#</a></h3>
<p>On your <strong>local machine</strong> (your laptop), run the SSH tunnel command shown in
the <code class="docutils literal notranslate"><span class="pre">scode</span></code> output. Add the <code class="docutils literal notranslate"><span class="pre">-N</span></code> flag so that SSH only does port forwarding
and does not open a remote shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>-N<span class="w"> </span>-L<span class="w"> </span><span class="m">8000</span>:&lt;compute_node_ip&gt;:&lt;remote_port&gt;<span class="w"> </span>&lt;your-cnetid&gt;@midway3.rcc.uchicago.edu
</pre></div>
</div>
<p>For example, using the output above:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>-N<span class="w"> </span>-L<span class="w"> </span><span class="m">8000</span>:10.50.250.67:58992<span class="w"> </span>jbejarano@midway3.rcc.uchicago.edu
</pre></div>
</div>
<p>You can optionally add the <code class="docutils literal notranslate"><span class="pre">-f</span></code> flag to run the tunnel in the background.</p>
</section>
<section id="step-4-connect-via-your-browser">
<h3>Step 4: Connect via your browser<a class="headerlink" href="#step-4-connect-via-your-browser" title="Link to this heading">#</a></h3>
<p>Open a browser and navigate to the URL shown in the <code class="docutils literal notranslate"><span class="pre">scode</span></code> output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8000/?tkn=SOME_LONG_TOKEN
</pre></div>
</div>
<p>You should see the VS Code editor running in your browser, connected to the
Midway3 compute node. You can edit files, open terminals, and work as if you
were using VS Code locally ‚Äî but all computation happens on the cluster.</p>
</section>
<section id="step-5-managing-the-scode-session">
<h3>Step 5: Managing the scode session<a class="headerlink" href="#step-5-managing-the-scode-session" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the status of your scode server</span>
scode<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>status<span class="w"> </span>&lt;jobid&gt;

<span class="c1"># Check the job in the SLURM queue</span>
squeue<span class="w"> </span>-j<span class="w"> </span>&lt;jobid&gt;

<span class="c1"># Cancel the session when you&#39;re done</span>
scancel<span class="w"> </span>&lt;jobid&gt;
</pre></div>
</div>
<div class="warning admonition">
<p class="admonition-title">Always clean up</p>
<p>When you are done working, cancel the <code class="docutils literal notranslate"><span class="pre">scode</span></code> job with <code class="docutils literal notranslate"><span class="pre">scancel</span></code>. Idle jobs
still consume your account‚Äôs compute allocation. Don‚Äôt leave sessions running
overnight.</p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="part-5-deliverables">
<h2>Part 5: Deliverables<a class="headerlink" href="#part-5-deliverables" title="Link to this heading">#</a></h2>
<p>Submit the following screenshots to demonstrate that you completed the assignment:</p>
<ol class="arabic simple">
<li><p><strong>Pipeline completion</strong>: A screenshot showing that the pipeline ran
successfully in your own directory at <code class="docutils literal notranslate"><span class="pre">/project/finm32900/$USER/case_study_clean_trace/</span></code>.
This could be the final lines of your job‚Äôs <code class="docutils literal notranslate"><span class="pre">.out</span></code> file showing
<code class="docutils literal notranslate"><span class="pre">&quot;Pipeline</span> <span class="pre">complete&quot;</span></code>, or a listing of the output files in <code class="docutils literal notranslate"><span class="pre">_data/stage1/</span></code>.</p></li>
<li><p><strong>VS Code via scode</strong>: A screenshot of VS Code running in your browser
via <code class="docutils literal notranslate"><span class="pre">scode</span></code>, showing that you are connected to a Midway3 compute node.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">tail</span></code> to show the end of your job output file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tail -20 &lt;jobid&gt;_clean-trace-pipeline.out
</pre></div>
</div>
<p>Or list the pipeline outputs:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ls -lh /project/finm32900/${USER}/case_study_clean_trace/_data/stage1/
</pre></div>
</div>
</div>
</section>
</section>

<div class="section ablog__blog_comments">
   
</div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="notebooks/_02_replicate_GSW2005_ipynb.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Replicating the G√ºrkaynak, Sack, and Wright (2006) Treasury Yield Curve</p>
      </div>
    </a>
    <a class="right-next"
       href="final_project.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Final Project</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-outcomes">Learning Outcomes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assignment">Assignment</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-1-set-up-your-working-directory-on-rcc">Part 1: Set Up Your Working Directory on RCC</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-ssh-into-midway3">Step 1: SSH into Midway3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-create-your-personal-directory-in-project-space">Step 2: Create your personal directory in project space</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-clone-the-clean-trace-repository">Step 3: Clone the Clean TRACE repository</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-2-set-up-the-conda-environment">Part 2: Set Up the Conda Environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-load-the-anaconda-module">Step 1: Load the Anaconda module</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-create-a-conda-environment-in-project-space">Step 2: Create a conda environment in project space</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-configure-the-environment-file">Step 3: Configure the environment file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-configure-wrds-pgpass">Step 4: Configure WRDS <code class="docutils literal notranslate"><span class="pre">.pgpass</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-3-run-the-clean-trace-pipeline">Part 3: Run the Clean TRACE Pipeline</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-the-workflow">Understanding the workflow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-sbatch-script">The sbatch script</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#submit-the-batch-job">Submit the batch job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monitor-your-job">Monitor your job</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-4-launch-vs-code-on-midway-with-scode">Part 4: Launch VS Code on Midway with <code class="docutils literal notranslate"><span class="pre">scode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-load-the-required-modules">Step 1: Load the required modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-launch-the-vs-code-server">Step 2: Launch the VS Code server</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-set-up-ssh-port-forwarding">Step 3: Set up SSH port forwarding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-connect-via-your-browser">Step 4: Connect via your browser</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-managing-the-scode-session">Step 5: Managing the scode session</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#part-5-deliverables">Part 5: Deliverables</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeremiah Bejarano
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2026, Jeremiah Bejarano.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>